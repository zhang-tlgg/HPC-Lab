# 小作业三 实验报告

## 测量 OpenMP 并行 for 循环不同调度策略的性能

张天乐 2018011038

### 测量结果

| 调度模式    | 均匀长度排序时间   | 随机长度排序时间   |
| ------- | ---------- | ---------- |
| 不并行     | 1894.42 ms | 4261.07 ms |
| static  | 68.5096 ms | 1415.36 ms |
| dynamic | 74.5623 ms | 1373.09 ms |
| guided  | 67.7 ms    | 1453.1 ms  |

### 分析

实验中有两组测例：较多且为均匀长度的分段，和较少且为随机长度的分段。

dynamic 调度与 static 调度相比，优点是灵活，缺点是分配带来的高开销。static 调度是提前分派好线程计算的所有块，dynamic 调度是线程完成一块任务后再被分配一块。因此，在随机长度排序上 dynamic 有更好的效果，因为 dynamic 动态调度避免了线程间计算任务差异过大，尽量平均线程计算任务。dynamic 调度在均匀长度排序上效果差，是因为不同线程任务量相等，dynamic 的动态调度没有起到作用，反而分配的高开销带来额外的耗时，综合导致 dynamic 耗时更长。

guided 调度与 static 调度相比，有更好的负载均衡，但又更多的开销。在均匀长度排序上，因为 guided 有更好的负载均衡，所以耗时比 static 少，但差异不大。在随机长度排序上，因为 guided 调度和 static 调度都是执行含多次迭代的块，因此动态调度并不能提升很大的性能，反而额外开销带来的耗时影响更大，综合导致 guided 的耗时比 static 多。

guided 调度与 dynamic 调度相比，有更少的开销，和没那么好的负载均衡。开销少导致在均匀长度排序上 guided 效果更好，较差的负载均衡导致在随机长度排序上 guided 效果更差
